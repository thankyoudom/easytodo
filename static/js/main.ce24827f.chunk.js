(this.webpackJsonpmeetinglog=this.webpackJsonpmeetinglog||[]).push([[0],{20:function(e,t,a){e.exports=a(32)},31:function(e,t,a){},32:function(e,t,a){"use strict";a.r(t);var s=a(2),n=a.n(s),r=a(17),l=a.n(r),i=a(5),c=a(7),o=a(4),m=a(19);const d=Object(m.a)({apiKey:"AIzaSyA2IQa1_2pwmvxk7aygaLxwmnWKp5GWWFI",authDomain:"easytodo-a8d05.firebaseapp.com",databaseURL:"easytodo-a8d05-default-rtdb.firebaseio.com/",projectId:"easytodo-a8d05",storageBucket:"easytodo-a8d05.appspot.com",messagingSenderId:"941406707669 "});Object(c.c)(d),Object(o.b)(d),new c.a;class h extends s.Component{render(){const{user:e}=this.props;return n.a.createElement("div",{className:"container text-center"},n.a.createElement("div",{className:"row justify-content-center"},n.a.createElement("div",{className:"col-10 col-md-10 col-lg-8 col-xl-7"},n.a.createElement("div",{className:"display-4 text-primary mt-3 mb-2",style:{fontSize:"2.8em"}},"easy todo"),n.a.createElement("p",{className:"lead",style:{fontSize:"1.4em",fontWeight:200}},"This simple app creates meetings, allows people to check in, and picks random users to award giveaways. It's a good example of a Single Page Application which includes connection to a database and routing. It's a practical way to learn ",n.a.createElement("a",{href:"https://reactjs.org/"},"React")," ","with ",n.a.createElement("a",{href:"https://firebase.google.com"},"Firebase"),"."),null==e&&n.a.createElement("span",null,n.a.createElement(i.a,{to:"/register",className:"btn btn-outline-primary mr-2"},"register"),n.a.createElement(i.a,{to:"/login",className:"btn btn-outline-primary mr-2"},"log In")),e&&n.a.createElement(i.a,{to:"/tasks",className:"btn btn-primary"},"tasks"))," "))}}var g=h;class u extends s.Component{render(){const{userName:e,logOutUser:t}=this.props;return n.a.createElement("div",{className:"text-center mt-4"},n.a.createElement("span",{className:"text-secondary font-weight-bold pl-1"},"Welcome ",e),",",n.a.createElement(i.a,{to:"/login",className:"font-weight-bold text-primary pl-1",onClick:e=>t(e)},"log out"))}}var p=u,b=a(9);class E extends s.Component{render(){const{user:e,logOutUser:t}=this.props;return n.a.createElement("nav",{className:"site-nav family-sans navbar navbar-expand bg-primary navbar-dark higher"},n.a.createElement("div",{className:"container-fluid"},n.a.createElement(i.a,{to:"/",className:"navbar-brand"},n.a.createElement(b.d,{className:"mr-1"})," easy todo"),n.a.createElement("div",{className:"navbar-nav ml-auto"},e&&n.a.createElement(i.a,{className:"nav-item nav-link",to:"/tasks"},"tasks"),!e&&n.a.createElement(i.a,{className:"nav-item nav-link",to:"/login"},"log in"),!e&&n.a.createElement(i.a,{className:"nav-item nav-link",to:"/register"},"register"),e&&n.a.createElement(i.a,{className:"nav-item nav-link",to:"/login",onClick:e=>t(e)},"log out"))))}}var N=E;class v extends s.Component{render(){const{theMessage:e}=this.props;return n.a.createElement("div",{className:"col-12 alert alert-danger px-3"},e)}}var y=v;class f extends s.Component{constructor(e){super(e),this.state={email:"",password:"",errorMessage:null},this.handleChange=this.handleChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this)}handleChange(e){const t=e.target.name,a=e.target.value;this.setState({[t]:a})}handleSubmit(e){e.preventDefault();const{email:t,password:a}=this.state,s=Object(c.c)(d);Object(c.e)(s,t,a).then(()=>{Object(i.c)("/meetings")}).catch(e=>{this.setState({errorMessage:e.message})})}render(){return n.a.createElement("form",{className:"mt-3",onSubmit:this.handleSubmit},n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row justify-content-center"},n.a.createElement("div",{className:"col-lg-6"},n.a.createElement("div",{className:"card bg-light"},n.a.createElement("div",{className:"card-body"},n.a.createElement("h3",{className:"font-weight-light mb-3"},"Log in"),n.a.createElement("section",{className:"form-group"},this.state.errorMessage&&n.a.createElement(y,{theMessage:this.state.errorMessage}),n.a.createElement("label",{className:"form-control-label sr-only",htmlFor:"Email"},"Email"),n.a.createElement("input",{required:!0,className:"form-control",type:"email",id:"email",name:"email",placeholder:"Email",value:this.state.email,onChange:this.handleChange})),n.a.createElement("section",{className:"form-group"},n.a.createElement("input",{required:!0,className:"form-control",type:"password",name:"password",placeholder:"Password",value:this.state.password,onChange:this.handleChange})),n.a.createElement("div",{className:"form-group text-right mb-0"},n.a.createElement("button",{className:"btn btn-primary",type:"submit"},"Log in"))))))))}}var C=f;class w extends s.Component{constructor(e){super(e),this.state={displayName:"",email:"",passOne:"",passTwo:"",errorMessage:null},this.handleChange=this.handleChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this)}handleChange(e){const t=e.target.name,a=e.target.value;this.setState({[t]:a},()=>{this.state.passOne!==this.state.passTwo?this.setState({errorMessage:"Passwords do not match"}):this.setState({errorMessage:null})})}handleSubmit(e){e.preventDefault();const t={displayName:this.state.displayName,email:this.state.email,password:this.state.passOne},a=Object(c.c)(d);Object(c.b)(a,t.email,t.password).then(()=>{this.props.registerUser(t.displayName)}).catch(e=>{null!==e.message?this.setState({errorMessage:e.message}):this.setState({errorMessage:null})})}render(){return n.a.createElement("form",{className:"mt-3",onSubmit:this.handleSubmit},n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row justify-content-center"},n.a.createElement("div",{className:"col-lg-8"},n.a.createElement("div",{className:"card bg-light"},n.a.createElement("div",{className:"card-body"},n.a.createElement("h3",{className:"font-weight-light mb-3"},"Register"),n.a.createElement("div",{className:"form-row"},null!==this.state.errorMessage?n.a.createElement(y,{theMessage:this.state.errorMessage}):null,n.a.createElement("section",{className:"col-sm-12 form-group"},n.a.createElement("label",{className:"form-control-label sr-only",htmlFor:"displayName"},"Display Name"),n.a.createElement("input",{className:"form-control",type:"text",id:"displayName",placeholder:"Display Name",name:"displayName",required:!0,value:this.state.displayName,onChange:this.handleChange}))),n.a.createElement("section",{className:"form-group"},n.a.createElement("label",{className:"form-control-label sr-only",htmlFor:"email"},"Email"),n.a.createElement("input",{className:"form-control",type:"email",id:"email",placeholder:"Email Address",required:!0,name:"email",value:this.state.email,onChange:this.handleChange})),n.a.createElement("div",{className:"form-row"},n.a.createElement("section",{className:"col-sm-6 form-group"},n.a.createElement("input",{className:"form-control",type:"password",name:"passOne",placeholder:"Password",value:this.state.passOne,onChange:this.handleChange})),n.a.createElement("section",{className:"col-sm-6 form-group"},n.a.createElement("input",{className:"form-control",type:"password",required:!0,name:"passTwo",placeholder:"Repeat Password",value:this.state.passTwo,onChange:this.handleChange}))),n.a.createElement("div",{className:"form-group text-right mb-0"},n.a.createElement("button",{className:"btn btn-primary",type:"submit"},"Register"))))))))}}var O=w,j=a(10);class S extends s.Component{constructor(e){super(e),this.fetchStarCounts=async()=>{const e=Object(o.b)(d),t=Object(o.e)(e,"meetings/".concat(this.props.userID));try{const a=await Object(o.a)(t);if(a.exists()){const t=a.val(),s={};for(const a in t){const n=t[a].attendees;if(n){let t=0;for(const s in n){const n=Object(o.e)(e,"meetings/".concat(this.props.userID,"/").concat(a,"/attendees/").concat(s,"/starCounts"));t+=(await Object(o.a)(n)).val()||0}s[a]=t}else s[a]=0}this.setState({starCounts:s})}}catch(a){console.error("Error fetching star counts: ",a)}},this.deleteMeeting=(e,t)=>{e.preventDefault();const a=Object(o.b)(d),s=Object(o.e)(a,"meetings/".concat(this.props.userID,"/").concat(t));Object(o.f)(s).then(()=>{console.log("Meeting ".concat(t," deleted successfully")),this.fetchStarCounts()}).catch(e=>{console.error("Error deleting meeting: ",e)})},this.state={starCounts:{}},this.deleteMeeting=this.deleteMeeting.bind(this)}componentDidMount(){this.fetchStarCounts()}render(){const{meetings:e}=this.props,{starCounts:t}=this.state,a=e.map(e=>n.a.createElement("div",{className:"list-group-item d-flex",key:e.meetingID},n.a.createElement("section",{className:"btn-group align-self-center",role:"group","aria-label":"Meeting Options"},n.a.createElement("button",{className:"btn btn-sm btn-outline-secondary",title:"Delete Meeting",onClick:t=>this.deleteMeeting(t,e.meetingID)},n.a.createElement(j.d,null)),n.a.createElement("button",{className:"btn btn-sm btn-outline-secondary",title:"Check In",onClick:()=>Object(i.c)("/checkin/".concat(this.props.userID,"/").concat(e.meetingID))},n.a.createElement(b.a,null)),n.a.createElement("button",{className:"btn btn-sm btn-outline-secondary",title:"Attendees List",onClick:()=>Object(i.c)("/attendees/".concat(this.props.userID,"/").concat(e.meetingID))},n.a.createElement(j.a,null))),n.a.createElement("section",{className:"pl-3 text-left align-self-center"},e.meetingName," (",t[e.meetingID]||0," \u2b50)")));return n.a.createElement("div",null,a)}}var D=S;class I extends s.Component{constructor(e){super(e),this.state={meetingName:""},this.handleChange=this.handleChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this)}handleChange(e){const t=e.target.name,a=e.target.value;this.setState({[t]:a})}handleSubmit(e){e.preventDefault(),this.props.addMeeting(this.state.meetingName),this.setState({meetingName:""})}render(){return n.a.createElement("div",{className:"container mt-4"},n.a.createElement("div",{className:"row justify-content-center"},n.a.createElement("div",{className:"col-md-8 text-center"},n.a.createElement("h1",{className:"font-weight-light"},"Add a Task"),n.a.createElement("div",{className:"card bg-light"},n.a.createElement("div",{className:"card-body text-center"},n.a.createElement("form",{className:"formgroup",onSubmit:this.handleSubmit},n.a.createElement("div",{className:"input-group input-group-lg"},n.a.createElement("input",{type:"text",className:"form-control",name:"meetingName",placeholder:"task name","aria-describedby":"buttonAdd",value:this.state.meetingName,onChange:this.handleChange}),n.a.createElement("div",{className:"input-group-append"},n.a.createElement("button",{type:"submit",className:"btn btn-sm btn-info",id:"buttonAdd"},"+"))))))),n.a.createElement("div",{className:"col-11 col-md-6 text-center"},n.a.createElement("div",{className:"card border-top-0 rounded-0"},this.props.meetings&&this.props.meetings.length?n.a.createElement("div",{className:"card-body py-2"},n.a.createElement("h4",{className:"card-title font-weight-light m-0"},"your tasks")):null,this.props.meetings&&n.a.createElement("div",{className:"list-group list-group-flush"},n.a.createElement(D,{userID:this.props.userID,meetings:this.props.meetings}))))))}}var k=I;class x extends s.Component{constructor(e){super(e),this.state={displayName:"",email:""},this.handleChange=this.handleChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this)}handleChange(e){const t=e.target.name,a=e.target.value;this.setState({[t]:a})}handleSubmit(e){e.preventDefault();const t=Object(o.b)(d),a=Object(o.e)(t,"meetings/".concat(this.props.userID,"/").concat(this.props.meetingID,"/attendees"));Object(o.d)(a,{attendeeName:this.state.displayName,attendeeEmail:this.state.email,star:!1}),Object(i.c)("/attendees/".concat(this.props.userID,"/").concat(this.props.meetingID))}render(){return n.a.createElement("form",{className:"mt-3",onSubmit:this.handleSubmit},n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row justify-content-center"},n.a.createElement("div",{className:"col-lg-6"},n.a.createElement("div",{className:"card bg-light"},n.a.createElement("div",{className:"card-body"},n.a.createElement("h3",{className:"font-weight-light mb-3"},"Check in"),n.a.createElement("section",{className:"form-group"},n.a.createElement("label",{className:"form-control-label sr-only",htmlFor:"displayName"},"Name"),n.a.createElement("input",{required:!0,className:"form-control",type:"text",id:"displayName",name:"displayName",placeholder:"Name",value:this.state.displayName,onChange:this.handleChange})),n.a.createElement("section",{className:"form-group"},n.a.createElement("label",{className:"form-control-label sr-only",htmlFor:"email"},"Email"),n.a.createElement("input",{required:!0,className:"form-control",type:"email",id:"email",name:"email",placeholder:"Email",value:this.state.email,onChange:this.handleChange})),n.a.createElement("div",{className:"form-group text-right mb-0"},n.a.createElement("button",{className:"btn btn-primary",type:"submit"},"Check in"))))))))}}var M=x;class A extends s.Component{constructor(e){super(e),this.deleteAttendee=(e,t,a)=>{e.preventDefault();const s=this.props.adminUser,n=Object(o.b)(d),r=Object(o.e)(n,"meetings/".concat(s,"/").concat(t,"/attendees/").concat(a));Object(o.f)(r).then(()=>{console.log("Attendee ".concat(a," deleted successfully"))}).catch(e=>{console.error("Error deleting attendee: ",e)})},this.toggleStar=async(e,t,a)=>{e.preventDefault();const s=this.props.adminUser,n=Object(o.b)(d),r=Object(o.e)(n,"meetings/".concat(s,"/").concat(t,"/attendees/").concat(a,"/starCounts")),l=Object(o.e)(n,"meetings/".concat(s,"/").concat(t,"/attendees/").concat(a,"/starLogs"));try{const e=(new Date).toISOString(),t=Object(o.d)(l);await Object(o.g)(t,{timestamp:e,message:this.state.starMessage});const s=(await Object(o.a)(r)).val()||0;await Object(o.g)(r,s+1),this.setState({starMessage:"",messageSubmitted:!0}),console.log("Star toggled for attendee ".concat(a))}catch(i){console.error("Error toggling star: ",i)}},this.state={starMessage:""},this.handleMessageChange=this.handleMessageChange.bind(this),this.deleteAttendee=this.deleteAttendee.bind(this),this.toggleStar=this.toggleStar.bind(this)}handleMessageChange(e){this.setState({starMessage:e.target.value})}render(){const e=this.props.adminUser===this.props.userID,t=this.props.attendees.map(t=>n.a.createElement("div",{className:"col-8 col-sm-6 col-md-4 col-lg-3 mb-2 p-0 px-1",key:t.attendeeID},n.a.createElement("div",{className:"card "},n.a.createElement("div",{className:"card-body px-3 py-2 d-flex align-items-center "+(e?"":"justify-content-center")},e&&n.a.createElement("div",{className:"btn-group pr-2"},n.a.createElement("button",{className:"btn btn-sm "+(t.star?"btn-info":"btn-outline-secondary"),title:"Give user a star",onClick:e=>this.toggleStar(e,this.props.meetingID,t.attendeeID)},n.a.createElement(j.c,null)),n.a.createElement("a",{href:"mailto:".concat(t.attendeeEmail),className:"btn btn-sm btn-outline-secondary",title:"Mail Attendee"},n.a.createElement(j.b,null)),n.a.createElement("button",{className:"btn btn-sm btn-outline-secondary",title:"Delete Attendee",onClick:e=>this.deleteAttendee(e,this.props.meetingID,t.attendeeID)},n.a.createElement(j.d,null))),n.a.createElement("div",null,t.attendeeName)),n.a.createElement("div",{className:"card-footer"},n.a.createElement("input",{type:"text",className:"form-control",placeholder:"Enter your message",value:this.state.starMessage,onChange:this.handleMessageChange})))));return n.a.createElement("div",{className:"row justify-content-center"},t)}}var U=A;class Q extends s.Component{constructor(e){super(e),this.state={searchQuery:"",allAttendees:[],displayAttendees:[]},this.handleChange=this.handleChange.bind(this),this.resetQuery=this.resetQuery.bind(this),this.chooseRandom=this.chooseRandom.bind(this)}componentDidMount(){const e=Object(o.b)(d),t=Object(o.e)(e,"meetings/".concat(this.props.userID,"/").concat(this.props.meetingID,"/attendees"));Object(o.c)(t,e=>{let t=e.val(),a=[];for(let s in t)a.push({attendeeID:s,attendeeName:t[s].attendeeName,attendeeEmail:t[s].attendeeEmail,star:t[s].star});this.setState({allAttendees:a,displayAttendees:a})})}handleChange(e){const t=e.target.name,a=e.target.value;this.setState({[t]:a})}chooseRandom(){const e=Math.floor(Math.random()*this.state.allAttendees.length);this.resetQuery(),this.setState({displayAttendees:[this.state.allAttendees[e]]})}resetQuery(){this.setState({displayAttendees:this.state.allAttendees,searchQuery:""})}render(){const e=this.state.displayAttendees.filter(e=>e.attendeeName.toLowerCase().match(this.state.searchQuery.toLowerCase()));return n.a.createElement("div",{className:"container mt-4"},n.a.createElement("div",{className:"row justify-content-center"},n.a.createElement("div",{className:"col-md-8"},n.a.createElement("h1",{className:"font-weight-light text-center"},"Attendees"),n.a.createElement("div",{className:"card bg-light mb-4"},n.a.createElement("div",{className:"card-body text-center"},n.a.createElement("div",{className:"input-group input-group-lg"},n.a.createElement("input",{type:"text",name:"searchQuery",value:this.state.searchQuery,placeholder:"Search Attendees",className:"form-control",onChange:this.handleChange}),n.a.createElement("div",{className:"input-group-append"},n.a.createElement("button",{className:"btn btn-sm btn-outline-info",title:"Pick a random attendee",onClick:()=>this.chooseRandom()},n.a.createElement(b.b,null)),n.a.createElement("button",{className:"btn btn-sm btn-outline-info",title:"Reset Search",onClick:()=>this.resetQuery()},n.a.createElement(b.c,null)))))))),n.a.createElement(U,{userID:this.props.userID,meetingID:this.props.meetingID,adminUser:this.props.adminUser,attendees:e}))}}var R=Q;class L extends s.Component{constructor(){super(),this.registerUser=e=>{const t=Object(c.c)(d);Object(c.d)(t,t=>{t.updateProfile({displayName:e}).then(()=>{this.setState({user:t,displayName:t.displayName,userID:t.uid}),Object(i.c)("/meetings")})})},this.logOutUser=e=>{e.preventDefault(),this.setState({displayName:null,userID:null,user:null});const t=Object(c.c)(d);Object(c.f)(t).then(()=>{Object(i.c)("/login")})},this.addMeeting=e=>{const t=Object(o.b)(d),a="meetings/".concat(this.state.user.uid),s=Object(o.e)(t,a);Object(o.d)(s,{meetingName:e})},this.state={user:null,displayName:null,userID:null,meetings:[],howManyMeetings:0}}componentDidMount(){const e=Object(c.c)(d),t=Object(o.b)(d);Object(c.d)(e,e=>{if(e){this.setState({user:e,displayName:e.displayName,userID:e.uid});const a=Object(o.e)(t,"meetings/"+e.uid);Object(o.c)(a,e=>{let t=e.val(),a=[];for(let s in t)a.push({meetingID:s,meetingName:t[s].meetingName});this.setState({meetings:a,howManyMeetings:a.length})})}else this.setState({user:null})})}render(){return n.a.createElement("div",null,n.a.createElement(N,{user:this.state.user,logOutUser:this.logOutUser}),this.state.user&&n.a.createElement(p,{userName:this.state.displayName,logOutUser:this.logOutUser}),n.a.createElement(i.b,null,n.a.createElement(g,{path:"/",user:this.state.user}),n.a.createElement(C,{path:"/login"}),n.a.createElement(k,{path:"/tasks",meetings:this.state.meetings,addMeeting:this.addMeeting,userID:this.state.userID}),n.a.createElement(R,{path:"/attendees/:userID/:meetingID",adminUser:this.state.userID}),n.a.createElement(M,{path:"/checkin/:userID/:meetingID"}),n.a.createElement(O,{path:"/register",registerUser:this.registerUser})))}}var W=L;a(30),a(31);const T=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function q(e){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const t=e.installing;t.onstatechange=()=>{"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(e=>{console.error("Error during service worker registration:",e)})}l.a.render(n.a.createElement(W,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",()=>{const e="".concat("","/service-worker.js");T?(!function(e){fetch(e).then(t=>{404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):q(e)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):q(e)})}}()}},[[20,1,2]]]);
//# sourceMappingURL=main.ce24827f.chunk.js.map